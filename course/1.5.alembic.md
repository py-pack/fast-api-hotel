# База Данных: Подключение

## Install DB

Можно так же как автор показывает в курсе, установить БД PostgreSQL на свою машину. 
Но я поставил через docker compose, чтоб не возиться с установко БД

В этом месте может быть не всем понятно.
```yaml
environment:
    POSTGRES_DB: ${DB_NAME:-hotel}
    POSTGRES_USER: ${DB_USER:-posgres}
    POSTGRES_PASSWORD: ${DB_PASS:-posgres}
```

**${DB_NAME:-hotel}** - таким образом мы передаем переменные окружения `DB_NAME`, 
если их не существует, то устанавливаем значение по умолчанию, в данном примере это `hotel`, 
дефис в начале нужен для самого yml, как как там ожидается список.

Docker Compose, при запуске по умолчанию сам возьмет файл `.env` 
и подставит эти переменные переменные.

Для того чтоб работало, просто создайте файл `.env` на основе `.env.example`.
Так удобно задавать все в одном месте, а `.env.example` служит базой знаний 
о том какие переменные окружения используются в проекте

Запустить БД через **docker compose**

    docker compose up -d

## Зависимости

Чтоб не было проблем с прохождением курса ставим строго по версии зависимости

    pip install sqlalchemy==2.0.5
    pip install alembic==1.10.1
    pip install asyncpg==0.27.0

## Миграции

Инициализируем миграции
    
    alembic init migrations

Создаем миграцию

    alembic revision --autogenerate -m "<Название миграции>"

Выполняем миграции

    alembic upgrade head